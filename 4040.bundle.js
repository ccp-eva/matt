"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[4040],{4040:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var i=r(6486),d=r.n(i),a=r(6358),o=r(2354),s=r(9965),u=r(8503),l=r(7103),n=r(1489);a.p8.registerPlugin(o._);const c=async({currentSlide:t,previousSlide:e})=>{(0,n.TH)(t,e),data.rankingSlideCounter++;const r="sqrs",i="idj-chicken",c="idj-cat",p=document.getElementById("audio"),h=document.getElementById(`link-${r}-idj-headphones`),m=document.getElementById("text-notAtAll_00000181077235414643669070000007534180645725931444_").children[0],g=document.getElementById("text-aLittle_00000140703112196460740660000017012435304514240394_").children[0],y=document.getElementById("text-aMediumAmount_00000062173616712733668220000006037470562555163269_").children[0],f=document.getElementById("text-aLotSimilar_00000037679055330304298250000013189285339730141346_").children[0],A=document.getElementById(`${r}-idj-1`),E=A.getAttribute("fill"),$=document.getElementById(`${r}-idj-2`),b=$.getAttribute("fill"),v=document.getElementById(`${r}-idj-3`),x=v.getAttribute("fill"),S=document.getElementById(`${r}-idj-4`),B=S.getAttribute("fill"),I=document.getElementById(`link-${r}-${i}`),T=document.getElementById(`link-${r}-${c}`),k=document.getElementById(`link-${r}-idj-next`),L=(new Map).set(0,{x:800,y:330}).set(1,{x:1120,y:330}),w=d().shuffle([i,c]),_=w.map((t=>document.getElementById(`link-${r}-${t}`)));data.procedure[data.currentSlide]={response:"",order:w,duration:0,[i]:{position:0,coords:{x:0,y:0}},[c]:{position:0,coords:{x:0,y:0}}};const j={[i]:w.indexOf(i),[c]:w.indexOf(c)};(0,u.PA)(_[0],L.get(0).x,L.get(0).y),(0,u.PA)(_[1],L.get(1).x,L.get(1).y),a.p8.set([m,g,y,f,A,$,v,S,k],{autoAlpha:0}),a.p8.set(_,{transformOrigin:"50% 50%"}),a.p8.set([_,h],{autoAlpha:.5}),h.style.pointerEvents="none",await(0,s.bA)(`./cultures/${data.culture}/audio/${r}.mp3`),a.p8.timeline().to([A,m],{autoAlpha:1}).to([$,g],{delay:1.5,autoAlpha:1}).to([v,y],{delay:1,autoAlpha:1}).to([S,f],{delay:.8,autoAlpha:1}),await(0,s.bA)(`./cultures/${data.culture}/audio/${r}-resp.mp3`),(0,s.hY)(`./cultures/${data.culture}/audio/${r}.mp3`,h.id),1===data.rankingSlideCounter&&await(0,s.bA)(`./cultures/${data.culture}/audio/sqre-expl.mp3`),a.p8.to([I,T,h],{autoAlpha:1}),h.style.pointerEvents="visible";let Y=!1;p.addEventListener("play",(t=>{Y=!0,t.target.src.includes(`${r}-`)||a.p8.to([I,T,h],{autoAlpha:.5,pointerEvents:"none"})})),p.addEventListener("ended",(()=>{Y=!1,a.p8.to([I,T,h],{autoAlpha:1,pointerEvents:"visible"})})),[A,$,v,S].forEach(((t,e)=>{t.addEventListener("click",(()=>{(0,s.hY)(`./cultures/${data.culture}/audio/${r}-resp-${e}.mp3`)}))})),[A,$,v,S].forEach((t=>{t.addEventListener("mouseover",(()=>{t.setAttribute("fill","#c6d325"),t.style.cursor="pointer"}))})),[A,$,v,S].forEach((t=>{t.addEventListener("mouseout",(()=>{t.style.cursor="default"}))})),A.addEventListener("mouseout",(()=>{A.setAttribute("fill",E)})),$.addEventListener("mouseout",(()=>{$.setAttribute("fill",b)})),v.addEventListener("mouseout",(()=>{v.setAttribute("fill",x)})),S.addEventListener("mouseout",(()=>{S.setAttribute("fill",B)})),o._.create([I,T],{onPress:function(){let t=this.target.id.slice(10);(0,s.hY)(`./cultures/${data.culture}/audio/${r}-${t}.mp3`)},onDrag:function(){this.hitTest(A,"70%")?(A.setAttribute("fill","#c6d325"),a.p8.to(this.target,{scale:.5})):A.setAttribute("fill",E),this.hitTest($,"70%")?($.setAttribute("fill","#c6d325"),a.p8.to(this.target,{scale:.5})):$.setAttribute("fill",b),this.hitTest(v,"70%")?(v.setAttribute("fill","#c6d325"),a.p8.to(this.target,{scale:.5})):v.setAttribute("fill",x),this.hitTest(S,"70%")?(S.setAttribute("fill","#c6d325"),a.p8.to(this.target,{scale:.5})):S.setAttribute("fill",B),this.hitTest(A,"70%")||this.hitTest($,"70%")||this.hitTest(v,"70%")||this.hitTest(S,"70%")||a.p8.to(this.target,{scale:1})},onDragEnd:function(){const t=this.target,e=t.id.slice(10),i=j[e],d=a.p8.getProperty(t,"x"),o=a.p8.getProperty(t,"y");console.log(e),console.log(i),this.hitTest(A,"70%")&&(data.procedure[data.currentSlide][e].position=1,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,A.setAttribute("fill",E),(0,s.hY)(`./cultures/${data.culture}/audio/${r}-resp-0.mp3`)),this.hitTest($,"70%")&&(data.procedure[data.currentSlide][e].position=2,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,$.setAttribute("fill",b),(0,s.hY)(`./cultures/${data.culture}/audio/${r}-resp-1.mp3`)),this.hitTest(v,"70%")&&(data.procedure[data.currentSlide][e].position=3,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,v.setAttribute("fill",x),(0,s.hY)(`./cultures/${data.culture}/audio/${r}-resp-2.mp3`)),this.hitTest(S,"70%")&&(data.procedure[data.currentSlide][e].position=4,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,S.setAttribute("fill",B),(0,s.hY)(`./cultures/${data.culture}/audio/${r}-resp-3.mp3`)),this.hitTest(A,"70%")||this.hitTest($,"70%")||this.hitTest(v,"70%")||this.hitTest(S,"70%")||(0===data.procedure[data.currentSlide][e].position?a.p8.to(t,{x:L.get(i).x,y:L.get(i).y}):a.p8.to(t,{x:data.procedure[data.currentSlide][e].coords.x,y:data.procedure[data.currentSlide][e].coords.y,scale:.5}))}});const P=()=>{let t=[];return w.forEach((e=>{data.procedure[data.currentSlide][e].position||t.push(!1)})),t};for(;P().length>0;)await(0,u._v)(100);for(;Y;)await(0,u._v)(100);for(Y=!0,(0,s.hY)(`./cultures/${data.culture}/audio/sqr-next-red.mp3`),a.p8.to(k,{autoAlpha:.5,pointerEvents:"none"}),a.p8.timeline().to(k,{filter:"drop-shadow(0px 0px 14px #a90707)",delay:1,repeat:-1,yoyo:!0,reversed:!0});Y;)await(0,u._v)(100);a.p8.to(k,{autoAlpha:1,pointerEvents:"visible"}),await(0,l.c)(k.id)}},7103:(t,e,r)=>{r.d(e,{c:()=>i});const i=t=>new Promise((e=>{const r=t=>{const r=t.target;return e(r)};"string"==typeof t&&document.getElementById(t).addEventListener("click",r,{once:!0}),Array.isArray(t)&&t.forEach((t=>{document.getElementById(t).addEventListener("click",r,{once:!0})})),void 0===t&&document.getElementById("wrapper").addEventListener("click",r,{once:!0})}))}}]);