"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[6842],{6842:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var d=a(6358),o=a(5919),n=a(5212),i=a.n(n),r=a(9965),l=a(7103),s=a(8503),u=a(1489);const c=async({currentSlide:t,previousSlide:e})=>{var a,n,c,p;data.reasoningSlideCounter++;const v="sr1ij1cat",b="humanidj",x="oneHuman",y="cat",m="oneCat",h={neutral:`./cultures/${data.culture}/video/pinda-neutral-listening.${data.meta.videoExtension}`,text1:`./cultures/${data.culture}/video/s-ex-next-red-textInput.${data.meta.videoExtension}`,text2:`./cultures/${data.culture}/video/sr-promp-textInput.${data.meta.videoExtension}`,text3:`./cultures/${data.culture}/video/text-input-3.${data.meta.videoExtension}`,audio1:`./cultures/${data.culture}/video/prompt-audioInput-start-speaking-buttons.${data.meta.videoExtension}`,audio2:`./cultures/${data.culture}/video/sr-prompt-audioInput.${data.meta.videoExtension}`,audio3:`./cultures/${data.culture}/video/audio-input-3.${data.meta.videoExtension}`,react1:`./cultures/${data.culture}/video/sr-react-1.${data.meta.videoExtension}`,react2:`./cultures/${data.culture}/video/sr-react-2.${data.meta.videoExtension}`,react3:`./cultures/${data.culture}/video/sr-react-3.${data.meta.videoExtension}`},g={neutral:"",text1:"",text2:"",text3:"",audio1:"",audio2:"",audio3:"",react1:"",react2:"",react3:""};data.pindaNeutralBlob||(g.neutral=h.neutral),data.react1Blob||(g.react1=h.react1),data.react2Blob||(g.react2=h.react2),data.react3Blob||(g.react3=h.react3),data.textIntroBlob||"text"!==data.input||(g.text1=h.text1),data.textIntroBlob2||"text"!==data.input||(g.text2=h.text2),data.textIntroBlob3||"text"!==data.input||(g.text3=h.text3),data.audioIntroBlob||"audio"!==data.input||(g.audio1=h.audio1),data.audioIntroBlob2||"audio"!==data.input||(g.audio2=h.audio2),data.audioIntroBlob3||"audio"!==data.input||(g.audio3=h.audio3),"userchoice-audio"!==data.input&&"userchoice-text"!==data.input||(data.textIntroBlob||(g.text1=h.text1),data.textIntroBlob2||(g.text2=h.text2),data.textIntroBlob3||(g.text3=h.text3),data.audioIntroBlob||(g.audio1=h.audio1),data.audioIntroBlob2||(g.audio2=h.audio2),data.audioIntroBlob3||(g.audio3=h.audio3));const E=document.getElementById("s-blocking-state");E.removeAttribute("visibility");for(const[t,e]of Object.entries(g))if(e){const a=await fetch(e),d=await a.blob();g[t]=URL.createObjectURL(d)}data.pindaNeutralBlob=data.pindaNeutralBlob||g.neutral,data.textIntroBlob=data.textIntroBlob||g.text1,data.textIntroBlob2=data.textIntroBlob2||g.text2,data.textIntroBlob3=data.textIntroBlob3||g.text3,data.audioIntroBlob=data.audioIntroBlob||g.audio1,data.audioIntroBlob2=data.audioIntroBlob2||g.audio2,data.audioIntroBlob3=data.audioIntroBlob3||g.audio3,data.react1Blob=data.react1Blob||g.react1,data.react2Blob=data.react2Blob||g.react2,data.react3Blob=data.react3Blob||g.react3,g.neutral=g.neutral||data.pindaNeutralBlob,g.text1=g.text1||data.textIntroBlob,g.text2=g.text2||data.textIntroBlob2,g.text3=g.text3||data.textIntroBlob3,g.audio1=g.audio1||data.audioIntroBlob,g.audio2=g.audio2||data.audioIntroBlob2,g.audio3=g.audio3||data.audioIntroBlob3,g.react1=g.react1||data.react1Blob,g.react2=g.react2||data.react2Blob,g.react3=g.react3||data.react3Blob,E.setAttribute("visibility","hidden"),console.log(g);{const t=document.getElementById(`${v}-wr`),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");[...t.attributes].map((({name:t,value:a})=>e.setAttribute(t,a))),e.removeAttribute("fill"),t.replaceWith(e),e.innerHTML=`\n\t<div id="wrapper-${v}" style="display: none;">\n\t\t<div id="toggle-${v}" style="width: 9em; margin: 0 auto; margin-bottom: 10px">\n\t\t\t\t<input id="chck-${v}" type="checkbox" />\n\t\t\t<label for="chck-${v}" class="check-trail"><span class="check-handler"></span> </label>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<textarea\n\t\t\t   rows="3"\n\t\t\t\tdisabled\n\t\t\t\tid="text-response-${v}"\n\t\t\t\tmaxlength="2000"\n\t\t\t\tstyle="display: block; pointer-events: auto;"\n\t\t\t></textarea>\n\t\t\t<div id="voice-response-${v}" style="display: flex;">\n\t\t\t\t<button type="button" class="button reasoning" disabled id="voice-response-start-${v}"><span>ðŸŽ¤&nbsp;Start</span></button> <button type="button" class="button reasoning" disabled id="voice-response-stop-${v}"><span>ðŸ›‘&nbsp;Stop</span></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>`}const B=document.getElementById(`link-${v}-headphones`),$=document.getElementById("audio"),I=document.getElementById("pinda"),w=document.getElementById("pinda-neutral"),A=document.getElementById(`link-${v}-next`),S=document.getElementById(`${v}-${x}`),f=document.getElementById(`${v}-cantDecide`),k=document.getElementById(`${v}-${m}`),C=document.getElementById(`wrapper-${v}`),L=document.getElementById(`text-response-${v}`),j=document.getElementById(`voice-response-${v}`),R=document.getElementById(`voice-response-start-${v}`),D=document.getElementById(`voice-response-stop-${v}`),T=document.getElementById(`toggle-${v}`),N=document.querySelector(".check-trail"),_=document.getElementById(`chck-${v}`);A.style.pointerEvents="none",N.style.pointerEvents="none",d.p8.set([A,N],{autoAlpha:.25}),data.procedure[data.currentSlide]={duration:0,input:data.input,textInput:"",isText:!1,isVoice:!1,voiceExplanation:!1,textExplanation:!1},"text"===data.input&&(T.style.visibility="hidden",j.style.display="none"),"audio"===data.input&&(_.click(),T.style.visibility="hidden",L.style.display="none",j.style.display="flex"),"userchoice-audio"===data.input&&(_.click(),L.style.display="none",j.style.display="flex"),"userchoice-text"===data.input&&(L.style.display="block",j.style.display="none");let H=!1,P=!1,O=!1;if(data.procedure.s1Ij1Ca){if(H=data.procedure.s1Ij1Ca.response.toLowerCase().includes(`-one${b.slice(0,-4)}`),P=data.procedure.s1Ij1Ca.response.toLowerCase().includes("-cantdecide"),O=data.procedure.s1Ij1Ca.response.toLowerCase().includes(`-one${y}`),data.procedure.s1Ij1Ca.swapLeftRight){const t=document.getElementById(`${v}-${x}`),e=document.getElementById(`${v}-${m}`);(0,s.PA)(t,1450),(0,s.PA)(e,470)}}else H=!1,P=!0,O=!1;H&&S.classList.add("dilemma-card-fix"),P&&f.classList.add("dilemma-card-fix"),O&&k.classList.add("dilemma-card-fix"),(0,u.TH)(t,e),H?(null===(n=null===(a=null===data||void 0===data?void 0:data.procedure)||void 0===a?void 0:a.s1Ij1Ca)||void 0===n?void 0:n.swapLeftRight)?await(0,r.bA)(`./cultures/${data.culture}/audio/${v}-right.mp3`):await(0,r.bA)(`./cultures/${data.culture}/audio/${v}-left.mp3`):(null===(p=null===(c=null===data||void 0===data?void 0:data.procedure)||void 0===c?void 0:c.s1Ij1Ca)||void 0===p?void 0:p.swapLeftRight)?await(0,r.bA)(`./cultures/${data.culture}/audio/${v}-right.mp3`):await(0,r.bA)(`./cultures/${data.culture}/audio/${v}-left.mp3`),H&&(await(0,r.bA)(`./cultures/${data.culture}/audio/srw-${b}.mp3`),(0,r.hY)(`./cultures/${data.culture}/audio/srw-${b}.mp3`,B.id)),P&&(await(0,r.bA)(`./cultures/${data.culture}/audio/srw-cantDecide.mp3`),(0,r.hY)(`./cultures/${data.culture}/audio/srw-cantDecide.mp3`,B.id)),O&&(await(0,r.bA)(`./cultures/${data.culture}/audio/srw-${y}.mp3`),(0,r.hY)(`./cultures/${data.culture}/audio/srw-${y}.mp3`,B.id)),d.p8.set(C,{autoAlpha:0}),C.style.display="block",d.p8.to(C,{autoAlpha:1}),data.procedure[data.currentSlide].voiceExplanation=_.checked,data.procedure[data.currentSlide].textExplanation=!_.checked;let U=!0;for(I.addEventListener("play",(()=>{U=!0,L.disabled=!0,d.p8.to(N,{autoAlpha:.5}),N.style.pointerEvents="none",B.style.pointerEvents="none"})),I.addEventListener("ended",(()=>{U=!1,L.disabled=!1,d.p8.to(N,{autoAlpha:1}),N.style.pointerEvents="visible",B.style.pointerEvents="visible"})),_.checked&&(1===data.reasoningSlideCounter&&(I.src=g.audio1,await d.p8.timeline().to(R,{filter:"drop-shadow(0px 0px 15px #000)",delay:13.5,repeat:3,yoyo:!0,reversed:!0}).to(D,{filter:"drop-shadow(0px 0px 15px #000)",delay:2.5,repeat:3,yoyo:!0,reversed:!0})),2===data.reasoningSlideCounter&&(I.src=g.audio2),3===data.reasoningSlideCounter&&(I.src=g.audio3)),_.checked||(1===data.reasoningSlideCounter&&(I.src=g.text1),2===data.reasoningSlideCounter&&(I.src=g.text2),3===data.reasoningSlideCounter&&(I.src=g.text3));U;)await(0,s._v)(100);w.src=g.neutral,d.p8.timeline().to(I,{autoAlpha:0}).to(w,{autoAlpha:1},"<"),d.p8.to(N,{autoAlpha:1}),N.style.pointerEvents="visible",L.disabled=!1,R.disabled=!1,$.addEventListener("play",(()=>{N.style.pointerEvents="none",d.p8.set(N,{autoAlpha:.25})})),$.addEventListener("ended",(()=>{N.style.pointerEvents="visible",d.p8.set(N,{autoAlpha:1})})),"userchoice-audio"!==data.input&&"userchoice-text"!==data.input||_.addEventListener("change",(async()=>{const t=_.checked,e=!_.checked;if(t&&(L.style.display="none",j.style.display="flex"),e&&(L.style.display="block",j.style.display="none"),t&&!data.procedure[data.currentSlide].voiceExplanation){for(data.procedure[data.currentSlide].voiceExplanation=!0,R.disabled=!0,N.style.pointerEvents="none",B.style.pointerEvents="none",d.p8.set([A,N],{autoAlpha:.25}),d.p8.to(w,{autoAlpha:0}),1===data.reasoningSlideCounter&&(I.src=g.audio1,await d.p8.timeline().to(R,{filter:"drop-shadow(0px 0px 15px #000)",delay:13.5,repeat:3,yoyo:!0,reversed:!0}).to(D,{filter:"drop-shadow(0px 0px 15px #000)",delay:2.5,repeat:3,yoyo:!0,reversed:!0})),2===data.reasoningSlideCounter&&(I.src=g.audio2),3===data.reasoningSlideCounter&&(I.src=g.audio3);U;)await(0,s._v)(100);R.disabled=!1,d.p8.to(N,{autoAlpha:1}),N.style.pointerEvents="visible",B.style.pointerEvents="visible",d.p8.timeline().to(I,{autoAlpha:0}).to(w,{autoAlpha:1},"<")}if(e&&!data.procedure[data.currentSlide].textExplanation){for(data.procedure[data.currentSlide].textExplanation=!0,L.disabled=!0,N.style.pointerEvents="none",B.style.pointerEvents="none",d.p8.set(N,{autoAlpha:.25}),d.p8.to(w,{autoAlpha:0}),1===data.reasoningSlideCounter&&(I.src=g.text1),2===data.reasoningSlideCounter&&(I.src=g.text2),3===data.reasoningSlideCounter&&(I.src=g.text3),await(0,s._v)(500);U;)await(0,s._v)(100);L.disabled=!1,d.p8.to(N,{autoAlpha:1}),N.style.pointerEvents="visible",B.style.pointerEvents="visible",d.p8.timeline().to(I,{autoAlpha:0}).to(w,{autoAlpha:1},"<")}})),L.addEventListener("input",(()=>{L.value.length>=o.Z.globals.minimumTextInputLength?(data.procedure[data.currentSlide].isText=!0,data.procedure[data.currentSlide].isVoice=!1,d.p8.set(A,{autoAlpha:1}),d.p8.set(N,{autoAlpha:.25}),A.style.pointerEvents="visible",N.style.pointerEvents="none"):(d.p8.set(N,{autoAlpha:1}),d.p8.set(A,{autoAlpha:.25}),A.style.pointerEvents="none",N.style.pointerEvents="visible")})),R.addEventListener("click",(async()=>{data.procedure[data.currentSlide].isText=!1,data.procedure[data.currentSlide].isVoice=!0;let t=await navigator.mediaDevices.getUserMedia({audio:!0}),e=new(i().RecordRTCPromisesHandler)(t,{type:"audio"});e.startRecording(),R.disabled=!0,D.disabled=!1,N.style.pointerEvents="none",d.p8.set(N,{autoAlpha:.25}),D.addEventListener("click",(async()=>{await e.stopRecording();let t=await e.getBlob();(0,s.vw)(t,(0,s.Dz)("matt",`${data.currentSlide}`,"ogg")),i().invokeSaveAsDialog(t,(0,s.Dz)("matt",`${data.currentSlide}`,"ogg")),A.style.pointerEvents="visible",d.p8.timeline().to(A,{autoAlpha:1}),R.disabled=!1,D.disabled=!0,N.style.pointerEvents="visible",d.p8.set(N,{autoAlpha:1})}))}));const V=await(0,l.c)(A.id);for(console.log(V.id),data.procedure[data.currentSlide].textInput=L.value,console.log(data.procedure[data.currentSlide].textInput),data.procedure[data.currentSlide].response=V.id,U=!0,await d.p8.timeline().to("#s-reasoning-1-ij-1-ca",{autoAlpha:0}).to(w,{autoAlpha:0}),1===data.reasoningSlideCounter&&(I.src=g.react1),2===data.reasoningSlideCounter&&(I.src=g.react2),3===data.reasoningSlideCounter&&(I.src=g.react3);U;)await(0,s._v)(100)}},7103:(t,e,a)=>{a.d(e,{c:()=>d});const d=t=>new Promise((e=>{const a=t=>{const a=t.target;return e(a)};"string"==typeof t&&document.getElementById(t).addEventListener("click",a,{once:!0}),Array.isArray(t)&&t.forEach((t=>{document.getElementById(t).addEventListener("click",a,{once:!0})})),void 0===t&&document.getElementById("wrapper").addEventListener("click",a,{once:!0})}))}}]);