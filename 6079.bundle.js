"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[6079],{6079:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var a=r(6486),d=r.n(a),i=r(6358),o=r(2354),u=r(9965),s=r(8503),l=r(7103),n=r(1489);i.p8.registerPlugin(o._);const c=async({currentSlide:t,previousSlide:e})=>{(0,n.TH)(t,e);const r="sqre",a="nam-duiker",c="nam-dog",p=document.getElementById("text-exposureChild_00000146484152637656991560000006672767312803778229_"),h=document.getElementById("text-exposureAdult_00000088124385293762317560000002528400080155719563_"),m=document.getElementById("audio"),y=document.getElementById(`link-${r}-nam-headphones`),g=document.getElementById("text-never_00000031190185399546714460000017242368477780374683_").children[0],f=document.getElementById("text-sometimes_00000066511200903867017250000003622035868604729474_").children[0],E=document.getElementById("text-often_00000172403294660540815840000015347275873309550252_").children[0],A=document.getElementById("text-almostEveryDay_00000009559361214036655900000011270719072892157322_").children[0],$=document.getElementById(`${r}-nam-1`),v=$.getAttribute("fill"),x=document.getElementById(`${r}-nam-2`),b=x.getAttribute("fill"),B=document.getElementById(`${r}-nam-3`),I=B.getAttribute("fill"),S=document.getElementById(`${r}-nam-4`),T=S.getAttribute("fill"),_=document.getElementById(`link-${r}-${a}`),k=document.getElementById(`link-${r}-${c}`),w=document.getElementById(`link-${r}-nam-next`),L=(new Map).set(0,{x:800,y:330}).set(1,{x:1120,y:330}),Y=d().shuffle([a,c]),P=Y.map((t=>document.getElementById(`link-${r}-${t}`)));data.procedure[data.currentSlide]={response:"",order:Y,duration:0,[a]:{position:0,coords:{x:0,y:0}},[c]:{position:0,coords:{x:0,y:0}}};const C={[a]:Y.indexOf(a),[c]:Y.indexOf(c)};(0,s.PA)(P[0],L.get(0).x,L.get(0).y),(0,s.PA)(P[1],L.get(1).x,L.get(1).y),i.p8.set([g,f,E,A,$,x,B,S,w],{autoAlpha:0}),i.p8.set(P,{transformOrigin:"50% 50%"}),i.p8.set([P,y],{autoAlpha:.5}),y.style.pointerEvents="none","adult"===data.agegroup?(i.p8.set(p,{autoAlpha:0}),await(0,u.bA)(`./cultures/${data.culture}/audio/${r}-adult.mp3`),(0,u.hY)(`./cultures/${data.culture}/audio/${r}-adult.mp3`,y.id)):(i.p8.set(h,{autoAlpha:0}),await(0,u.bA)(`./cultures/${data.culture}/audio/${r}.mp3`),(0,u.hY)(`./cultures/${data.culture}/audio/${r}.mp3`,y.id)),i.p8.timeline().to([$,g],{autoAlpha:1}).to([x,f],{delay:1,autoAlpha:1}).to([B,E],{delay:1.2,autoAlpha:1}).to([S,A],{delay:1.5,autoAlpha:1}),await(0,u.bA)(`./cultures/${data.culture}/audio/${r}-resp.mp3`),(0,u.hY)(`./cultures/${data.culture}/audio/${r}.mp3`,y.id),i.p8.to([_,k,y],{autoAlpha:1}),y.style.pointerEvents="visible";let D=!1;m.addEventListener("play",(t=>{D=!0,t.target.src.includes(`${r}-`)||i.p8.to([_,k,y],{autoAlpha:.5,pointerEvents:"none"})})),m.addEventListener("ended",(()=>{D=!1,i.p8.to([_,k,y],{autoAlpha:1,pointerEvents:"visible"})})),[$,x,B,S].forEach(((t,e)=>{t.addEventListener("click",(()=>{(0,u.hY)(`./cultures/${data.culture}/audio/${r}-resp-${e}.mp3`)}))})),[$,x,B,S].forEach((t=>{t.addEventListener("mouseover",(()=>{t.setAttribute("fill","#c6d325"),t.style.cursor="pointer"}))})),[$,x,B,S].forEach((t=>{t.addEventListener("mouseout",(()=>{t.style.cursor="default"}))})),$.addEventListener("mouseout",(()=>{$.setAttribute("fill",v)})),x.addEventListener("mouseout",(()=>{x.setAttribute("fill",b)})),B.addEventListener("mouseout",(()=>{B.setAttribute("fill",I)})),S.addEventListener("mouseout",(()=>{S.setAttribute("fill",T)})),o._.create([_,k],{onPress:function(){let t=this.target.id.slice(10);(0,u.hY)(`./cultures/${data.culture}/audio/${r}-${t}.mp3`)},onDrag:function(){this.hitTest($,"70%")?($.setAttribute("fill","#c6d325"),i.p8.to(this.target,{scale:.5})):$.setAttribute("fill",v),this.hitTest(x,"70%")?(x.setAttribute("fill","#c6d325"),i.p8.to(this.target,{scale:.5})):x.setAttribute("fill",b),this.hitTest(B,"70%")?(B.setAttribute("fill","#c6d325"),i.p8.to(this.target,{scale:.5})):B.setAttribute("fill",I),this.hitTest(S,"70%")?(S.setAttribute("fill","#c6d325"),i.p8.to(this.target,{scale:.5})):S.setAttribute("fill",T),this.hitTest($,"70%")||this.hitTest(x,"70%")||this.hitTest(B,"70%")||this.hitTest(S,"70%")||i.p8.to(this.target,{scale:1})},onDragEnd:function(){const t=this.target,e=t.id.slice(10),a=C[e],d=i.p8.getProperty(t,"x"),o=i.p8.getProperty(t,"y");console.log(e),console.log(a),this.hitTest($,"70%")&&(data.procedure[data.currentSlide][e].position=1,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,$.setAttribute("fill",v),(0,u.hY)(`./cultures/${data.culture}/audio/${r}-resp-0.mp3`)),this.hitTest(x,"70%")&&(data.procedure[data.currentSlide][e].position=2,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,x.setAttribute("fill",b),(0,u.hY)(`./cultures/${data.culture}/audio/${r}-resp-1.mp3`)),this.hitTest(B,"70%")&&(data.procedure[data.currentSlide][e].position=3,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,B.setAttribute("fill",I),(0,u.hY)(`./cultures/${data.culture}/audio/${r}-resp-2.mp3`)),this.hitTest(S,"70%")&&(data.procedure[data.currentSlide][e].position=4,data.procedure[data.currentSlide][e].coords.x=d,data.procedure[data.currentSlide][e].coords.y=o,S.setAttribute("fill",T),(0,u.hY)(`./cultures/${data.culture}/audio/${r}-resp-3.mp3`)),this.hitTest($,"70%")||this.hitTest(x,"70%")||this.hitTest(B,"70%")||this.hitTest(S,"70%")||(0===data.procedure[data.currentSlide][e].position?i.p8.to(t,{x:L.get(a).x,y:L.get(a).y}):i.p8.to(t,{x:data.procedure[data.currentSlide][e].coords.x,y:data.procedure[data.currentSlide][e].coords.y,scale:.5}))}});const O=()=>{let t=[];return Y.forEach((e=>{data.procedure[data.currentSlide][e].position||t.push(!1)})),t};for(;O().length>0;)await(0,s._v)(100);for(;D;)await(0,s._v)(100);for(D=!0,(0,u.hY)(`./cultures/${data.culture}/audio/sqr-next-red.mp3`),i.p8.to(w,{autoAlpha:.5,pointerEvents:"none"}),i.p8.timeline().to(w,{filter:"drop-shadow(0px 0px 14px #a90707)",delay:1,repeat:-1,yoyo:!0,reversed:!0});D;)await(0,s._v)(100);i.p8.to(w,{autoAlpha:1,pointerEvents:"visible"}),await(0,l.c)(w.id)}},7103:(t,e,r)=>{r.d(e,{c:()=>a});const a=t=>new Promise((e=>{const r=t=>{const r=t.target;return e(r)};"string"==typeof t&&document.getElementById(t).addEventListener("click",r,{once:!0}),Array.isArray(t)&&t.forEach((t=>{document.getElementById(t).addEventListener("click",r,{once:!0})})),void 0===t&&document.getElementById("wrapper").addEventListener("click",r,{once:!0})}))}}]);