const url=new URL(window.location.href),params=new URLSearchParams(url.search);let id="",culture="",birthday="",gender="",input="",datatransfer="";if(params.has("id")&&(id=params.get("id")),params.has("culture")&&(culture=params.get("culture")),params.has("birthday")&&(birthday=params.get("birthday")),params.has("gender")&&(gender=params.get("gender")),params.has("input")&&(input=params.get("input")),params.has("datatransfer")&&(datatransfer=params.get("datatransfer")),window.history.pushState({},document.title,window.location.pathname),id){const e=document.getElementById("input-id");e.required=!1,e.parentNode.style.display="none"}if(culture){const e=document.getElementById("input-culture");e.required=!1,e.parentNode.style.display="none"}if(birthday){const e=document.getElementById("input-birthday");e.required=!1,e.parentNode.style.display="none"}if(gender){const e=document.getElementById("input-gender");e.required=!1,e.parentNode.style.display="none"}if(input){const e=document.getElementById("input-response");e.required=!1,e.parentNode.style.display="none"}if(datatransfer){const e=document.getElementById("input-datatransfer");e.required=!1,e.parentElement.style.display="none"}const calculateAge=e=>{const t=Date.now()-e;return new Date(t).getUTCFullYear()-1970},handleDate=e=>{const t=calculateAge(Date.parse(e.target.value));consentText=document.getElementById("consent"),consentCheckbox=document.getElementById("input-consent"),t<12?(consentText.style.display="none",consentCheckbox.required=!1):(consentText.style.display="block",consentCheckbox.required=!0)},handleCheckbox=e=>{e.target.checked&&setTimeout((()=>{window.location.href="#consent",window.history.pushState({},document.title,window.location.pathname)}),1e3)},startButton=document.getElementById("start-button");startButton.style.pointerEvents="none";const microphoneCheckbox=document.getElementById("input-checkbox-microphone"),handleInputResponse=e=>{3===e.target.selectedIndex?(document.getElementById("input-checkbox-microphone").parentNode.style.display="none",startButton.style.pointerEvents="visible",startButton.style.opacity="1"):(document.getElementById("input-checkbox-microphone").parentNode.style.display="block",microphoneCheckbox.checked||(startButton.style.pointerEvents="none",startButton.style.opacity="0.5"))};microphoneCheckbox.parentNode.addEventListener("click",(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){microphoneCheckbox.checked=!0,startButton.style.pointerEvents="auto",startButton.style.opacity="1"})).catch((function(e){console.log("No mic for you!")}))})),document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault(),id=id||document.getElementById("input-id").value,culture=culture||document.getElementById("input-culture").value,birthday=birthday||document.getElementById("input-birthday").value;let t="";gender||(t=document.getElementById("input-gender").selectedIndex);let n="";input||(n=document.getElementById("input-response").selectedIndex);let a="";datatransfer||(a=document.getElementById("input-datatransfer").selectedIndex);const r=(new Map).set(0,"female").set(1,"male").set(2,"diverse"),o=(new Map).set(0,"userchoice-audio").set(1,"userchoice-text").set(2,"audio").set(3,"text"),d=(new Map).set(0,"both").set(1,"server");gender=gender||r.get(t),input=input||o.get(n),datatransfer=datatransfer||d.get(a),window.location.href=`${window.location.href}app.html?id=${id}&culture=${culture}&birthday=${birthday}&gender=${gender}&input=${input}&datatransfer=${datatransfer}`}));