"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[1672],{1672:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var a=s(6358),o=s(2354),i=s(6486),n=s.n(i),d=s(9965),r=s(7103),c=s(8503),l=s(1489);a.p8.registerPlugin(o._);const u=async()=>{(0,l.TH)(n().kebabCase(data.currentSlide),n().kebabCase(data.previousSlide)),data.procedure.sTask={duration:0,knownAnimals:[],unknownAnimals:[],human:"",chicken:void 0,pig:void 0,dog:void 0,sheep:void 0,goldfish:void 0,cow:void 0,rabbit:void 0,cat:void 0,assignedAnimals:0,comprehension:{completed:!1,order:n().shuffle(["inner","middle","outer"]),inner:!1,middle:!1,outer:!1}};const t=document.getElementById("player"),e=document.getElementById("st-inner"),s=document.getElementById("st-middle"),i=document.getElementById("st-outer"),u=document.getElementById("link-st-human"),h=document.getElementById("link-st-chicken"),p=document.getElementById("link-st-pig"),m=document.getElementById("link-st-dog"),k=document.getElementById("link-st-sheep"),g=document.getElementById("link-st-goldfish"),y=document.getElementById("link-st-cow"),T=document.getElementById("link-st-rabbit"),E=document.getElementById("link-st-cat");a.p8.to([e,s,i],{opacity:.5}),[e,s,i].forEach((t=>{t.style.cursor="pointer",t.addEventListener("mouseenter",(()=>{a.p8.timeline().to(t,{autoAlpha:1})})),t.addEventListener("mouseleave",(()=>{a.p8.timeline().to(t,{autoAlpha:.5})}))}));const f={0:{x:1330,y:306},1:{x:1539,y:306},2:{x:1748,y:306},3:{x:1330,y:543},4:{x:1539,y:543},5:{x:1748,y:543},6:{x:1330,y:774},7:{x:1539,y:774},8:{x:1748,y:774}};let A=[],v=[];["chicken","pig","dog","sheep","goldfish","cow","rabbit","cat"].forEach((t=>{const e=n().camelCase(`s-${t}`);data.procedure[e]&&("yes"===data.procedure[e].response.split("-").at(-1)&&A.push(t),"no"===data.procedure[e].response.split("-").at(-1)&&v.push(t))})),data.procedure.sTask.knownAnimals=A,data.procedure.sTask.unknownAnimals=v,A=[...A,"human"],v.forEach((t=>{a.p8.set(`#link-st-${t}`,{autoAlpha:0})}));const w={};A.forEach(((t,e)=>{w[t]=e;const s=document.getElementById(`link-st-${t}`);(0,c.PA)(s,f[e].x,f[e].y)})),a.p8.set(t,{autoAlpha:0}),a.p8.set("#link-st-next",{autoAlpha:0}),a.p8.timeline().to(t,{autoAlpha:1,delay:.5,onStart:()=>{t.src=`./cultures/${data.culture}/video/s-task.webm`}}).to(t,{autoAlpha:0,delay:14}),await(0,c._v)(14e3),(0,d.hY)(`./cultures/${data.culture}/audio/s-task-cut.mp3`,"link-st-headphones"),o._.create([h,u,p,m,k,g,y,T,E],{onPress:function(){let t=this.target.id.slice(8);(0,d.hY)(`./cultures/${data.culture}/audio/st-${t}.mp3`)},onDrag:function(){const t=this.target.id;this.hitTest(e,"50%")&&this.hitTest(s,"50%")&&this.hitTest(i,"50%")?(a.p8.to(e,{opacity:1,duration:.25}),a.p8.to(`#${t}`,{scale:.5,transformOrigin:"50% 50%"})):a.p8.to(e,{opacity:.5,duration:.25}),!this.hitTest(e,"50%")&&this.hitTest(s,"50%")&&this.hitTest(i,"50%")?(a.p8.to(s,{opacity:1,duration:.25}),a.p8.to(`#${t}`,{scale:.5,transformOrigin:"50% 50%"})):a.p8.to(s,{opacity:.5,duration:.25}),this.hitTest(e,"50%")||this.hitTest(s,"50%")||!this.hitTest(i,"50%")?a.p8.to(i,{opacity:.5,duration:.25}):(a.p8.to(i,{opacity:1,duration:.25}),a.p8.to(`#${t}`,{scale:.5,transformOrigin:"50% 50%"})),this.hitTest(e,"50%")||this.hitTest(s,"50%")||this.hitTest(i,"50%")||a.p8.to(`#${t}`,{scale:1,transformOrigin:"50% 50%"})},onDragEnd:function(){const t=this.target.id;console.log(t);const o=t.slice(8);this.hitTest(e,"50%")&&this.hitTest(s,"50%")&&this.hitTest(i,"50%")&&(data.procedure.sTask[o]="inner",data.procedure.sTask.assignedAnimals++,a.p8.to(e,{opacity:.5,duration:.25})),!this.hitTest(e,"50%")&&this.hitTest(s,"50%")&&this.hitTest(i,"50%")&&(data.procedure.sTask[o]="middle",data.procedure.sTask.assignedAnimals++,a.p8.to(s,{opacity:.5,duration:.25})),this.hitTest(e,"50%")||this.hitTest(s,"50%")||!this.hitTest(i,"50%")||(data.procedure.sTask[o]="outer",data.procedure.sTask.assignedAnimals++,a.p8.to(i,{opacity:.5,duration:.25})),this.hitTest(e,"50%")||this.hitTest(s,"50%")||this.hitTest(i,"50%")||(console.log(t),console.log(this.target),console.log(f[w[o]].x),console.log(f[w[o]].y),a.p8.to(`#${t}`,{x:0,y:0}))}});const x=()=>{let t=[];return A.forEach((e=>{data.procedure.sTask[e]||t.push(!1)})),t};for(;data.procedure.sTask.assignedAnimals<Math.ceil(A.length/2);)await(0,c._v)(500);console.log("Comprehension check..."),a.p8.timeline().to([h,u,p,m,k,g,y,T,E],{autoAlpha:0});for(const t of data.procedure.sTask.comprehension.order){(0,d.hY)(`./cultures/${data.culture}/audio/s-comp-check-${t}.mp3`,"link-st-headphones"),await(0,d.bA)(`./cultures/${data.culture}/audio/s-comp-check.mp3`),await(0,d.bA)(`./cultures/${data.culture}/audio/s-comp-check-${t}.mp3`),await(0,d.bA)(`./cultures/${data.culture}/audio/s-comp-check-expl.mp3`);const e=await(0,r.c)(["st-inner","st-middle","st-outer"]),s=["ok","alright","okThanks"],a=s[Math.floor(Math.random()*s.length)];await(0,d.bA)(`./cultures/${data.culture}/audio/neutral-resp-${a}.mp3`),e.id.slice(3)===t&&(data.procedure.sTask.comprehension[t]=!0)}for(data.procedure.sTask.comprehension.completed=!0,a.p8.timeline().to([h,u,p,m,k,g,y,T,E],{autoAlpha:1});x().length>0;)await(0,c._v)(1e3);a.p8.timeline().to("#link-st-next",{autoAlpha:1}).to("#link-st-next",{filter:"drop-shadow(0px 0px 14px #a90707)",delay:1,repeat:-1,yoyo:!0,reversed:!0}),await(0,r.c)("link-st-next"),(0,d.sT)()}},7103:(t,e,s)=>{s.d(e,{c:()=>a});const a=t=>new Promise((e=>{const s=t=>{const s=t.target;return e(s)};"string"==typeof t&&document.getElementById(t).addEventListener("click",s,{once:!0}),Array.isArray(t)&&t.forEach((t=>{document.getElementById(t).addEventListener("click",s,{once:!0})})),void 0===t&&document.getElementById("wrapper").addEventListener("click",s,{once:!0})}))}}]);