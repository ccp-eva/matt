"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[8312],{8312:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(6358),i=n(6486),o=n.n(i),s=n(5919),l=n(5212),d=n.n(l),r=n(9965),p=n(7103),u=n(8503),c=n(1489);const y=async()=>{{const e=document.getElementById("sm-written-response"),t=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");[...e.attributes].map((({name:e,value:n})=>t.setAttribute(e,n))),t.removeAttribute("fill"),e.replaceWith(t),t.innerHTML='\n\t<div id="wrapper-smeaning" style="display: none;">\n\t\t<div id="toggle" style="width: 9em; margin: 0 auto; margin-bottom: 10px">\n\t\t\t\t<input id="chck" type="checkbox" />\n\t\t\t<label for="chck" class="check-trail"><span class="check-handler"></span> </label>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<textarea\n\t\t\t\tdisabled\n\t\t\t\tid="text-response-meaning"\n\t\t\t\tmaxlength="2000"\n\t\t\t\tstyle="display: block; pointer-events: auto;"\n\t\t\t></textarea>\n\t\t\t<div id="voice-response-meaning" style="display: flex;">\n\t\t\t\t<button type="button" disabled id="voice-response-start-meaning" style="font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸŽ¤ Start</button> <button type="button" disabled id="voice-response-stop-meaning" style="font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸ›‘ Stop</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>'}const e=document.getElementById("link-sm-headphones"),t=document.getElementById("audio"),n=document.getElementById("player"),i=document.getElementById("link-sm-next"),l=document.getElementById("wrapper-smeaning"),y=document.getElementById("text-response-meaning"),m=document.getElementById("voice-response-meaning"),v=document.getElementById("voice-response-start-meaning"),g=document.getElementById("voice-response-stop-meaning"),h=document.getElementById("toggle"),b=document.querySelector(".check-trail"),E=document.getElementById("chck");i.style.pointerEvents="none",b.style.pointerEvents="none",a.ZP.set([i,b],{autoAlpha:.25}),a.ZP.set(n,{autoAlpha:0}),data.procedure.sMeaning={duration:0,input:data.input,textInput:"",isText:!1,isVoice:!1,voiceExplanation:!1,textExplanation:!1},"text"===data.input&&(h.style.visibility="hidden",m.style.display="none"),"audio"===data.input&&(E.click(),h.style.visibility="hidden",y.style.display="none",m.style.display="flex"),"userchoice-audio"===data.input&&(E.click(),y.style.display="none",m.style.display="flex"),"userchoice-text"===data.input&&(y.style.display="block",m.style.display="none"),l.style.display="block",data.procedure.sMeaning.voiceExplanation=E.checked,data.procedure.sMeaning.textExplanation=!E.checked;let x=!0,k=!0;for(n.addEventListener("play",(()=>{x=!0})),n.addEventListener("ended",(()=>{x=!1})),a.ZP.timeline().to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/st-finish-meaning.webm`}}).to(n,{delay:7,onStart:()=>{(0,c.TH)(o().kebabCase(data.currentSlide),o().kebabCase(data.previousSlide),[2,1])}});x;)await(0,u._v)(100);for(a.ZP.timeline().to(n,{autoAlpha:1,onStart:()=>{E.checked&&(n.src=`./cultures/${data.culture}/video/prompt-audioInput-start-speaking-buttons.webm`,a.ZP.timeline().to(v,{filter:"drop-shadow(0px 0px 20px #969696)",delay:8,repeat:3,yoyo:!0,reversed:!0}).to(g,{filter:"drop-shadow(0px 0px 20px #969696)",delay:1.5,repeat:3,yoyo:!0,reversed:!0})),E.checked||(n.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`)},onComplete:()=>{k=!1}});x||k;)await(0,u._v)(100);a.ZP.to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}}),a.ZP.to(b,{autoAlpha:1}),b.style.pointerEvents="auto",y.disabled=!1,v.disabled=!1,(0,r.hY)(`./cultures/${data.culture}/audio/st-meaning.mp3`,e.id),t.addEventListener("play",(()=>{b.style.pointerEvents="none",a.ZP.set(b,{autoAlpha:.25})})),t.addEventListener("ended",(()=>{b.style.pointerEvents="visible",a.ZP.set(b,{autoAlpha:1})})),"userchoice-audio"!==data.input&&"userchoice-text"!==data.input||E.addEventListener("change",(async()=>{const t=E.checked,o=!E.checked;if(t&&(y.style.display="none",m.style.display="flex"),o&&(y.style.display="block",m.style.display="none"),t&&!data.procedure.sMeaning.voiceExplanation){data.procedure.sMeaning.voiceExplanation=!0,v.disabled=!0,b.style.pointerEvents="none",e.style.pointerEvents="none",a.ZP.set([i,b],{autoAlpha:.25});let t=!0;for(a.ZP.timeline().to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/prompt-audioInput-start-speaking-buttons.webm`,n.loop=!1,a.ZP.timeline().to(v,{filter:"drop-shadow(0px 0px 20px #969696)",delay:8,repeat:3,yoyo:!0,reversed:!0}).to(g,{filter:"drop-shadow(0px 0px 20px #969696)",delay:1.5,repeat:3,yoyo:!0,reversed:!0})},onComplete:()=>{t=!1}});x||t;)await(0,u._v)(100);v.disabled=!1,a.ZP.to(b,{autoAlpha:1}),b.style.pointerEvents="auto",e.style.pointerEvents="auto",a.ZP.timeline().to(n,{autoAlpha:0}).to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}})}if(o&&!data.procedure.sMeaning.textExplanation){data.procedure.sMeaning.textExplanation=!0,y.disabled=!0,b.style.pointerEvents="none",e.style.pointerEvents="none",a.ZP.set(b,{autoAlpha:.25});let t=!0;for(a.ZP.timeline().to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`,n.loop=!1},onComplete:()=>{t=!1}});x||t;)await(0,u._v)(100);y.disabled=!1,a.ZP.to(b,{autoAlpha:1}),b.style.pointerEvents="auto",e.style.pointerEvents="auto",a.ZP.timeline().to(n,{autoAlpha:0}).to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}})}})),y.addEventListener("input",(()=>{y.value.length>=s.Z.globals.minimumTextInputLength?(data.procedure.sMeaning.isText=!0,data.procedure.sMeaning.isVoice=!1,a.ZP.set(i,{autoAlpha:1}),a.ZP.set(b,{autoAlpha:.25}),i.style.pointerEvents="visible",b.style.pointerEvents="none"):(a.ZP.set(b,{autoAlpha:1}),a.ZP.set(i,{autoAlpha:.25}),i.style.pointerEvents="none",b.style.pointerEvents="visible")})),v.addEventListener("click",(async()=>{data.procedure.sMeaning.isText=!1,data.procedure.sMeaning.isVoice=!0;let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new(d().RecordRTCPromisesHandler)(e,{type:"audio"});t.startRecording(),v.disabled=!0,g.disabled=!1,b.style.pointerEvents="none",a.ZP.set(b,{autoAlpha:.25}),g.addEventListener("click",(async()=>{await t.stopRecording();let e=await t.getBlob();(0,u.vw)(e,(0,u.Dz)("matt","s-meaning","ogg")),d().invokeSaveAsDialog(e,`s-meaning-${data.id}`),i.style.pointerEvents="auto",a.ZP.timeline().to(i,{autoAlpha:1}),v.disabled=!1,g.disabled=!0,b.style.pointerEvents="auto",a.ZP.set(b,{autoAlpha:1})}))}));const w=await(0,p.c)(i.id);console.log(w.id),data.procedure.sMeaning.textInput=y.value,console.log(data.procedure.sMeaning.textInput),n.loop=!1,await(0,u._v)(500),l.style.display="none"}},7103:(e,t,n)=>{n.d(t,{c:()=>a});const a=e=>new Promise((t=>{const n=e=>{const n=e.target;return t(n)};"string"==typeof e&&document.getElementById(e).addEventListener("click",n,{once:!0}),Array.isArray(e)&&e.forEach((e=>{document.getElementById(e).addEventListener("click",n,{once:!0})})),void 0===e&&document.getElementById("wrapper").addEventListener("click",n,{once:!0})}))}}]);