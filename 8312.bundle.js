"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[8312],{8312:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(6358),o=n(6486),i=n.n(o),s=n(5919),d=n(5212),r=n.n(d),l=n(9965),c=n(7103),u=n(8503),p=n(1489);const m=async()=>{const e=document.getElementById("player");a.ZP.set(e,{autoAlpha:0}),a.ZP.timeline().to(e,{autoAlpha:1,onStart:()=>{e.src=`./cultures/${data.culture}/video/st-finish-meaning.webm`}}).to(e,{delay:11,onStart:()=>{e.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`}}).to(e,{autoAlpha:0,delay:6}),await(0,u._v)(8e3),(0,p.TH)(i().kebabCase(data.currentSlide),i().kebabCase(data.previousSlide),[2,1]),data.procedure.sMeaning={duration:0,textInput:"",isText:!1,isVoice:!1,voiceExplanation:!1};const t=document.getElementById("link-sm-next");t.style.pointerEvents="none",a.ZP.set(t,{autoAlpha:.25});const n=document.getElementById("sm-written-response"),o=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");[...n.attributes].map((({name:e,value:t})=>o.setAttribute(e,t))),o.removeAttribute("fill"),n.replaceWith(o),o.innerHTML='\n\t<div>\n\t<div id="toggle" style="width: 9em; margin: 0 auto; margin-bottom: 10px">\n\t\t<input id="chck" type="checkbox" disabled />\n\t\t<label for="chck" class="check-trail"><span class="check-handler"></span> </label>\n\t</div>\n\n\t<div id="response-area">\n\t\t<textarea\n\t\t   disabled\n\t\t\tid="text-response"\n\t\t\tmaxlength="2000"\n\t\t\tstyle="pointer-events: auto;"\n\t\t></textarea disab>\n\t\t<button type="button" id="voice-response" style="display: none; font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸŽ¤ Record</button>\n\t</div>\n</div>\n';const d=document.getElementById("text-response"),m=document.getElementById("voice-response"),v=document.querySelector(".check-trail");await(0,u._v)(8e3),(0,l.hY)(`./cultures/${data.culture}/audio/st-meaning.mp3`,"link-sm-headphones");const g=document.getElementById("chck");g.disabled=!1,d.disabled=!1,g.addEventListener("change",(()=>{g.checked&&a.ZP.timeline().to(d,{onStart:()=>{data.procedure.sMeaning.voiceExplanation||(data.procedure.sMeaning.voiceExplanation=!0,a.ZP.timeline().to(e,{autoAlpha:1}),e.src=`./cultures/${data.culture}/video/sr-ex-next-red-audioInput.webm`,a.ZP.timeline().to(e,{autoAlpha:0,delay:6}))},autoAlpha:0,duration:.25,pointerEvents:"none",display:"none"}).to(m,{autoAlpha:1,duration:.25,pointerEvents:"auto",display:"block"},">"),g.checked||a.ZP.timeline().to(m,{autoAlpha:0,duration:.25,pointerEvents:"none",display:"none"}).to(d,{autoAlpha:1,duration:.25,pointerEvents:"auto",display:"block"},">")})),m.addEventListener("click",(async()=>{data.procedure.sMeaning.isText=!1,data.procedure.sMeaning.isVoice=!0;let e=await navigator.mediaDevices.getUserMedia({audio:!0}),n=new(r().RecordRTCPromisesHandler)(e,{type:"audio"});n.startRecording(),m.innerText="ðŸ›‘ Stop Recording",m.addEventListener("click",(async()=>{await n.stopRecording();let e=await n.getBlob();r().invokeSaveAsDialog(e,`s-meaning-${data.id}`),t.style.pointerEvents="auto",a.ZP.timeline().to(t,{autoAlpha:1})}))})),d.addEventListener("input",(()=>{d.value.length>=s.Z.globals.minimumTextInputLength?(data.procedure.sMeaning.isText=!0,data.procedure.sMeaning.isVoice=!1,t.style.pointerEvents="auto",v.style.pointerEvents="none",a.ZP.timeline().to(t,{autoAlpha:1,duration:.25}).to(".check-trail",{autoAlpha:.25,duration:.25},"<")):(t.style.pointerEvents="none",v.style.pointerEvents="auto",a.ZP.timeline().to(t,{autoAlpha:.25}).to(".check-trail",{autoAlpha:1,duration:.25},"<"))}));const h=await(0,c.c)(t.id);console.log(h.id),data.procedure.sMeaning.textInput=d.value,console.log(data.procedure.sMeaning.textInput),await(0,u._v)(500)}},7103:(e,t,n)=>{n.d(t,{c:()=>a});const a=e=>new Promise((t=>{const n=e=>{const n=e.target;return t(n)};"string"==typeof e&&document.getElementById(e).addEventListener("click",n,{once:!0}),Array.isArray(e)&&e.forEach((e=>{document.getElementById(e).addEventListener("click",n,{once:!0})})),void 0===e&&document.getElementById("wrapper").addEventListener("click",n,{once:!0})}))}}]);