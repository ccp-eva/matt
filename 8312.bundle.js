"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[8312],{8312:(t,e,n)=>{n.r(e),n.d(e,{default:()=>y});var a=n(6358),o=n(6486),i=n.n(o),s=n(5919),l=n(5212),d=n.n(l),r=n(9965),p=n(7103),u=n(8503),c=n(1489);const y=async()=>{{const t=document.getElementById("sm-written-response"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");[...t.attributes].map((({name:t,value:n})=>e.setAttribute(t,n))),e.removeAttribute("fill"),t.replaceWith(e),e.innerHTML='\n\t\t<div>\n\t\t<div id="toggle" style="width: 9em; margin: 0 auto; margin-bottom: 10px">\n\t\t\t<input id="chck" type="checkbox" />\n\t\t\t<label for="chck" class="check-trail"><span class="check-handler"></span> </label>\n\t\t</div>\n\t\n\t\t<div>\n\t\t\t<textarea\n\t\t\t\tdisabled\n\t\t\t\tid="text-response"\n\t\t\t\tmaxlength="2000"\n\t\t\t\tstyle="display: block; pointer-events: auto;"\n\t\t\t></textarea>\n\t\t\t<div id="voice-response" style="display: flex;">\n\t\t\t\t<button type="button" disabled id="voice-response-start" style="font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸŽ¤ Start</button> <button type="button" disabled id="voice-response-stop" style="font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸ›‘ Stop</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'}const t=document.getElementById("link-sm-headphones"),e=document.getElementById("audio"),n=document.getElementById("player"),o=document.getElementById("link-sm-next"),l=document.getElementById("text-response"),y=document.getElementById("voice-response"),v=document.getElementById("voice-response-start"),m=document.getElementById("voice-response-stop"),h=document.getElementById("toggle"),g=document.querySelector(".check-trail"),E=document.getElementById("chck");o.style.pointerEvents="none",g.style.pointerEvents="none",a.ZP.set([o,g],{autoAlpha:.25}),a.ZP.set(n,{autoAlpha:0}),data.procedure.sMeaning={duration:0,input:data.input,textInput:"",isText:!1,isVoice:!1,voiceExplanation:!1,textExplanation:!1},"text"===data.input&&(h.style.visibility="hidden",y.style.display="none"),"audio"===data.input&&(E.click(),h.style.visibility="hidden",l.style.display="none",y.style.display="flex"),"userchoice-audio"===data.input&&(E.click(),l.style.display="none",y.style.display="flex"),"userchoice-text"===data.input&&(l.style.display="block",y.style.display="none"),data.procedure.sMeaning.voiceExplanation=E.checked,data.procedure.sMeaning.textExplanation=!E.checked;let b=!0,x=!0;for(a.ZP.timeline().to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/st-finish-meaning.webm`,x=!0,b=!0}}).to(n,{delay:8,onStart:()=>{(0,c.TH)(i().kebabCase(data.currentSlide),i().kebabCase(data.previousSlide),[2,1])}}).to(n,{delay:2,autoAlpha:0}).to(n,{autoAlpha:1,onStart:()=>{x=!0,E.checked&&(n.src=`./cultures/${data.culture}/video/prompt-audioInput-start-speaking-buttons.webm`,a.ZP.timeline().to(v,{filter:"drop-shadow(0px 0px 20px #969696)",delay:8,repeat:3,yoyo:!0,reversed:!0}).to(m,{filter:"drop-shadow(0px 0px 20px #969696)",delay:1.5,repeat:3,yoyo:!0,reversed:!0})),E.checked||(n.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`)},onComplete:()=>{x=!1}}),n.addEventListener("play",(()=>{b=!0})),n.addEventListener("ended",(()=>{b=!1}));b||x;)await(0,u._v)(100);a.ZP.to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}}),a.ZP.to(g,{autoAlpha:1}),g.style.pointerEvents="auto",l.disabled=!1,v.disabled=!1,(0,r.hY)(`./cultures/${data.culture}/audio/st-meaning.mp3`,t.id),e.addEventListener("play",(()=>{g.style.pointerEvents="none",a.ZP.set(g,{autoAlpha:.25})})),e.addEventListener("ended",(()=>{g.style.pointerEvents="auto",a.ZP.set(g,{autoAlpha:1})})),E.addEventListener("change",(async()=>{const e=E.checked,i=!E.checked;if(e&&(l.style.display="none",y.style.display="flex"),i&&(l.style.display="block",y.style.display="none"),e&&!data.procedure.sMeaning.voiceExplanation){data.procedure.sMeaning.voiceExplanation=!0,v.disabled=!0,g.style.pointerEvents="none",t.style.pointerEvents="none",a.ZP.set([o,g],{autoAlpha:.25});let e=!0;for(a.ZP.timeline().to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/prompt-audioInput-start-speaking-buttons.webm`,n.loop=!1,a.ZP.timeline().to(v,{filter:"drop-shadow(0px 0px 20px #969696)",delay:8,repeat:3,yoyo:!0,reversed:!0}).to(m,{filter:"drop-shadow(0px 0px 20px #969696)",delay:1.5,repeat:3,yoyo:!0,reversed:!0})},onComplete:()=>{e=!1}});b||e;)await(0,u._v)(100);v.disabled=!1,a.ZP.to(g,{autoAlpha:1}),g.style.pointerEvents="auto",t.style.pointerEvents="auto",a.ZP.timeline().to(n,{autoAlpha:0}).to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}})}if(i&&!data.procedure.sMeaning.textExplanation){data.procedure.sMeaning.textExplanation=!0,l.disabled=!0,g.style.pointerEvents="none",t.style.pointerEvents="none",a.ZP.set(g,{autoAlpha:.25});let e=!0;for(a.ZP.timeline().to(n,{onStart:()=>{n.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`,n.loop=!1},onComplete:()=>{e=!1}});b||e;)await(0,u._v)(100);l.disabled=!1,a.ZP.to(g,{autoAlpha:1}),g.style.pointerEvents="auto",t.style.pointerEvents="auto",a.ZP.timeline().to(n,{autoAlpha:0}).to(n,{autoAlpha:1,onStart:()=>{n.src=`./cultures/${data.culture}/video/pinda-neutral-listening.webm`,n.loop=!0}})}})),l.addEventListener("input",(()=>{l.value.length>=s.Z.globals.minimumTextInputLength?(data.procedure.sMeaning.isText=!0,data.procedure.sMeaning.isVoice=!1,o.style.pointerEvents="auto",g.style.pointerEvents="none",a.ZP.timeline().to(o,{autoAlpha:1,duration:.25}).to(g,{autoAlpha:.25,duration:.25},"<")):(o.style.pointerEvents="none",g.style.pointerEvents="auto",a.ZP.timeline().to(o,{autoAlpha:.25}).to(g,{autoAlpha:1,duration:.25},"<"))})),v.addEventListener("click",(async()=>{data.procedure.sMeaning.isText=!1,data.procedure.sMeaning.isVoice=!0;let t=await navigator.mediaDevices.getUserMedia({audio:!0}),e=new(d().RecordRTCPromisesHandler)(t,{type:"audio"});e.startRecording(),v.disabled=!0,m.disabled=!1,g.style.pointerEvents="none",a.ZP.set(g,{autoAlpha:.25}),m.addEventListener("click",(async()=>{await e.stopRecording();let t=await e.getBlob();d().invokeSaveAsDialog(t,`s-meaning-${data.id}`),o.style.pointerEvents="auto",a.ZP.timeline().to(o,{autoAlpha:1}),v.disabled=!1,m.disabled=!0,g.style.pointerEvents="auto",a.ZP.set(g,{autoAlpha:1})}))}));const k=await(0,p.c)(o.id);console.log(k.id),data.procedure.sMeaning.textInput=l.value,console.log(data.procedure.sMeaning.textInput),n.loop=!1,await(0,u._v)(500)}},7103:(t,e,n)=>{n.d(e,{c:()=>a});const a=t=>new Promise((e=>{const n=t=>{const n=t.target;return e(n)};"string"==typeof t&&document.getElementById(t).addEventListener("click",n,{once:!0}),Array.isArray(t)&&t.forEach((t=>{document.getElementById(t).addEventListener("click",n,{once:!0})})),void 0===t&&document.getElementById("wrapper").addEventListener("click",n,{once:!0})}))}}]);