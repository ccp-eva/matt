"use strict";(self.webpackChunkmatt=self.webpackChunkmatt||[]).push([[312],{8312:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(6358),o=n(6486),i=n.n(o),r=n(5212),s=n.n(r),d=n(9965),c=n(7103),l=n(8503),u=n(1489);const p=async()=>{const e=document.getElementById("player");a.ZP.set(e,{autoAlpha:0}),a.ZP.timeline().to(e,{autoAlpha:1,onStart:()=>{e.src=`./cultures/${data.culture}/video/st-finish-meaning.webm`}}).to(e,{delay:11,onStart:()=>{e.src=`./cultures/${data.culture}/video/s-ex-next-red-textInput.webm`}}).to(e,{autoAlpha:0,delay:6}),await(0,l._v)(8e3),(0,u.TH)(i().kebabCase(data.currentSlide),i().kebabCase(data.previousSlide),[2,1]),(0,d.hY)(`./cultures/${data.culture}/audio/st-meaning.mp3`,"link-sm-headphones"),data.procedure.sMeaning={duration:0,textInput:"",isText:!1,isVoice:!1,voiceExplanation:!1};const t=document.getElementById("link-sm-next");t.style.pointerEvents="none",a.ZP.set(t,{autoAlpha:.25});const n=document.getElementById("sm-written-response"),o=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");[...n.attributes].map((({name:e,value:t})=>o.setAttribute(e,t))),o.removeAttribute("fill"),n.replaceWith(o),o.innerHTML='\n\t<div id="wrapper">\n\t<div id="toggle" style="width: 9em; margin: 0 auto; margin-bottom: 10px">\n\t\t<input id="chck" type="checkbox" />\n\t\t<label for="chck" class="check-trail"><span class="check-handler"></span> </label>\n\t</div>\n\n\t<div id="response-area">\n\t\t<textarea\n\t\t\tid="text-response"\n\t\t\tmaxlength="2000"\n\t\t\tstyle="pointer-events: auto;"\n\t\t></textarea>\n\t\t<button type="button" id="voice-response" style="display: none; font-size: 2rem; margin: 7% auto; pointer-events: auto; opacity: 1; visibility: inherit;">ðŸŽ¤ Record</button>\n\t</div>\n</div>\n';const r=document.getElementById("text-response"),p=document.getElementById("voice-response"),m=document.querySelector(".check-trail"),v=document.getElementById("chck");v.addEventListener("change",(()=>{v.checked&&a.ZP.timeline().to(r,{onStart:()=>{data.procedure.sMeaning.voiceExplanation||(data.procedure.sMeaning.voiceExplanation=!0,a.ZP.timeline().to(e,{autoAlpha:1}),e.src=`./cultures/${data.culture}/video/sr-ex-next-red-audioInput.webm`,a.ZP.timeline().to(e,{autoAlpha:0,delay:6}))},autoAlpha:0,duration:.25,pointerEvents:"none",display:"none"}).to(p,{autoAlpha:1,duration:.25,pointerEvents:"auto",display:"block"},">"),v.checked||a.ZP.timeline().to(p,{autoAlpha:0,duration:.25,pointerEvents:"none",display:"none"}).to(r,{autoAlpha:1,duration:.25,pointerEvents:"auto",display:"block"},">")})),p.addEventListener("click",(async()=>{data.procedure.sMeaning.isText=!1,data.procedure.sMeaning.isVoice=!0;let e=await navigator.mediaDevices.getUserMedia({audio:!0}),n=new(s().RecordRTCPromisesHandler)(e,{type:"audio"});n.startRecording(),p.innerText="ðŸ›‘ Stop Recording",p.addEventListener("click",(async()=>{await n.stopRecording();let e=await n.getBlob();s().invokeSaveAsDialog(e,`s-meaning-${data.id}`),t.style.pointerEvents="auto",a.ZP.timeline().to(t,{autoAlpha:1})}))})),r.addEventListener("input",(()=>{r.value.length>=15?(data.procedure.sMeaning.isText=!0,data.procedure.sMeaning.isVoice=!1,t.style.pointerEvents="auto",m.style.pointerEvents="none",a.ZP.timeline().to(t,{autoAlpha:1,duration:.25}).to(".check-trail",{autoAlpha:.25,duration:.25},"<")):(t.style.pointerEvents="none",m.style.pointerEvents="auto",a.ZP.timeline().to(t,{autoAlpha:.25}).to(".check-trail",{autoAlpha:1,duration:.25},"<"))}));const g=await(0,c.c)(t.id);console.log(g.id),data.procedure.sMeaning.textInput=r.value,console.log(data.procedure.sMeaning.textInput),await(0,l._v)(500)}},7103:(e,t,n)=>{n.d(t,{c:()=>a});const a=e=>new Promise((t=>{const n=e=>{const n=e.target;return t(n)};"string"==typeof e&&document.getElementById(e).addEventListener("click",n,{once:!0}),Array.isArray(e)&&e.forEach((e=>{document.getElementById(e).addEventListener("click",n,{once:!0})})),void 0===e&&document.getElementById("wrapper").addEventListener("click",n,{once:!0})}))}}]);